<h1>Activity Upload Complete</h1>
<p>Note: See the table below for specific information regarding the upload for each activity listing.</p> 
<p>Errors are featured within the table.</p>

<!--<%= link_to "Back to Trailhead Listing", trailheads_path %>-->
<p>
<% if @confirmed %>
  Activity data updated. Note the changes below.
<% else %>
  See your proposed changes below. Your trail data has NOT been permanently updated. To update your data, hit the "back" button on your browser and check the "Confirmed" checkbox before submitting. Note that duplicate trailhead names aren't detected during this preview.
<% end %>

<% if current_user.admin? %>

<p class='tableCaption'>Source matches (matching "<%= @source.code %>")</p>
<% else %>
<p class='tableCaption'>Source matches (matching "<%= current_user.organization.code %>")</p>
<% end %>
</p>
<table>
  <tr>
    <th>
      Status
    </th>
    <th>
      Activity Name
    </th>
    <th>
      Activity ID
    </th>
    <th>
      Import errors
    </th>
  </tr>
  <% @added_activities.each do |added_activity| %>
  <tr>
    <td>
      <% if added_activity[:success] %>
      <b><%= @confirmed ? "Added" : "Would Be Added" %></b>
      <% else %>
      <b><%= @confirmed ? "Not Added" : "Would Not Be Added" %></b> 
      <% end %>
    </td>
    <td>
      <%= added_activity[:activity].name %>
    </td>
    <td>
      <%= added_activity[:activity].activities_id %>
    </td>
    <td>
      <%= added_activity[:message] %>
    </td>
  </tr>
  <% end %>
  <% @removed_activities.each do |removed_activity| %>
  <tr>
    <td>  
      <% if removed_activity[:success] %>
      <b><%= @confirmed ? "Deleted" : "Would Be Deleted" %></b>  
      <% else %>
      <b><%= @confirmed ? "Not Deleted" : "Would Not Be Deleted" %></b>
      <% end %>
    </td>
    <td>
      <%= removed_activity[:activity].name %>
    </td>
    <td>
      <%= removed_activity[:activity].activities_id %>
    </td>
    <td>
      <%= removed_activity[:activity].created_at %>
    </td>
  </tr>
  <% end %>
</table>
